print(i)
}
for (i in 205:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 214:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 218:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
missing_code<-c(6,7,8,9,18,21,25,26,28,31,38,40,42,43,50,55,
61,63,71,72,73,80,85,92,93,99,107,111,119,121,
126,133,135,142,143,145,148,153,164,168,169,171,
176,185,195,201,203,204,213,217,219)
for (i in 220:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 221:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 226:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 229:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 230:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 231:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 235:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 239:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 240:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 242:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
missing_code<-c(6,7,8,9,18,21,25,26,28,31,38,40,42,43,50,55,
61,63,71,72,73,80,85,92,93,99,107,111,119,121,
126,133,135,142,143,145,148,153,164,168,169,171,
176,185,195,201,203,204,213,217,219,220,225,228,
229,230,234,238,239,241,243)
for (i in 244:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 252:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 257:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 258:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 269:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 270:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 279:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 293:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 296:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 297:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 306:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 311:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 312:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 315:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 323:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 326:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 327:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 329:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 334:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 336:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 337:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 348:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
for (i in 349:length(CODE2)){
FTSE_URL<-"https://www.reuters.com/finance/stocks/company-officers/"
url<-paste0(FTSE_URL,CODE2[[i]])
webpage<-read_html(url)%>%
html_table()
FTSE_TABLE<-webpage[[1]]
FTSE_TABLE$company_code<-CODE[[i]]
FTSE_R_TABLE_LIST[[i]]<-FTSE_TABLE
print(i)
}
missing_code<-c(6,7,8,9,18,21,25,26,28,31,38,40,42,43,50,55,
61,63,71,72,73,80,85,92,93,99,107,111,119,121,
126,133,135,142,143,145,148,153,164,168,169,171,
176,185,195,201,203,204,213,217,219,220,225,228,
229,230,234,238,239,241,243,251,256,257,268,269,
278,292,295,296,305,310,311,314,322,325,326,328,
333,335,336,347,348)
REUTER_SCRAPE_DF<-map_df(FTSE_R_TABLE_LIST,data.frame)
View(REUTER_SCRAPE_DF)
length(missing_code)
length(CODE2)
351-83
length(unique(REUTER_SCRAPE_DF$company_code))
REUTER_SCRAPE_DF<-map_df(FTSE_R_TABLE_LIST,data.frame)[,1:5]
REUTER_SCRAPE_DF$company_name<-REUTER_SCRAPE_DF$company_code
REUTER_SCRAPE_DF$company_name<-FTSE_MEM$NAME[match(REUTER_SCRAPE_DF$company_name,
FTSE_MEM$CODE)]
write.csv(REUTER_SCRAPE_DF,"REUTER_SCRAPE_DF.csv")
MISSING_LIST<-list()
j<-1
R<-missing_code[[j]]
R
RR<-CODE[R]
CODE[6]
MEM_M<-dplyr::filter(FTSE_MEM,CODE==RR)
for (j in 1:length(missing_code)){
R<-missing_code[[j]]
RR<-CODE[R]
MEM_M<-dplyr::filter(FTSE_MEM,CODE==RR)
MISSING_LIST[[j]]<-MEM_M
}
REUTER_MISSING<-map_df(MISSING_LIST,data.frame)
write.csv(REUTER_MISSING,"REUTER_MISSING.csv")
library(xlsx)
library(readxl)
F18<-read_excel("FTSE_350_FIRM_LIST.xlsx")
F18<-read_excel("FTSE_350_FIRM_LIST.xlsx",sheet = "2018-11")
F19<-read_xlsx("FTSE_350_FIRM_LIST.xlsx",sheet = "2019-08-16")
View(F19)
code_19<-F19$CODE
code_18<-F18$CODE
name19<-F19$NAME
name18<-F18$NAME
setdiff(name19,name18)
setdiff(code_18,code_19)
setdiff(name18,name19)
setdiff(name18,name19)
setdiff(name19,name18)
name18
name19
name19[1:10]
name18[1:10]
setdiff(name18,name19)
setdiff(name19,name18)
intersect(name18,name19)
#In 18 not 19
setdiff(name18,name19)
#In 19 not 18
setdiff(name19,name18)
#In 18 not 19
LEAVE<-write.csv(setdiff(name18,name19),"LEAVE18.csv")
#In 19 not 18
JOINED<-write.csv(setdiff(name19,name18),"JOINED19.csv"
)
library(CompaniesHouse)
mkey<-"2tv2rSV-ox3QsyNKFHnZwfgCB-sNtUNFZTgipTzH"
#In 19 not 18
JOINED<-setdiff(name19,name18)
#In 18 not 19
LEAVE<-setdiff(name18,name19)
SEARCH1<-CompanySearch_limit(JOINED[[1]])
SEARCH1<-CompanySearch_limit(JOINED[[1]],mkey)
View(SEARCH1)
library(dplyr)
SEARCH1<-CompanySearch_limit(JOINED[[1]],mkey)%>%filter(company.type=="plc")
View(SEARCH1)
SEARCH1<-CompanySearch_limit(JOINED[[2]],mkey)%>%
filter(company.type=="plc")
View(SEARCH1)
SEARCH1<-CompanySearch_limit(JOINED[[3]],mkey)%>%
filter(company.type=="plc")
View(SEARCH1)
SEARCH_LIST<-list()
for (i in 1:length(JOINED)){
SEARCH1<-CompanySearch_limit(JOINED[[i]],mkey)%>%
filter(company.type=="plc")
SEARCH_LIST[[i]]<-SEARCH1
}
SEARCH1<-CompanySearch_limit(JOINED[[6]],mkey)%>%
filter(company.type=="plc")
for (i in 16:length(JOINED)){
SEARCH1<-CompanySearch_limit(JOINED[[i]],mkey)%>%
filter(company.type=="plc")
SEARCH_LIST[[i]]<-SEARCH1
}
SEARCH1<-CompanySearch_limit(JOINED[[16]],mkey)%>%
filter(company.type=="plc")
View(SEARCH1)
for (i in 17:length(JOINED)){
SEARCH1<-CompanySearch_limit(JOINED[[i]],mkey)%>%
filter(company.type=="plc")
SEARCH_LIST[[i]]<-SEARCH1
}
library(purrr)
SEARCH_DF<-map_df(SEARCH_LIST,data.frame)
write.csv(SEARCH_DF,"SEARCH_DF.csv")
SEARCH1<-CompanySearch_limit(JOINED[[4]],mkey)%>%
filter(company.type=="plc")
SEARCH1<-CompanySearch_limit(JOINED[[4]],mkey)#%>%
View(SEARCH1)
SEARCH1<-CompanySearch_limit("APAX GLOBAL ALPHA LIMITED",mkey)#%>%
View(SEARCH1)
SEARCH1<-CompanySearch_limit("LAW DEBENTURE CORPORATION PLC ",mkey)#%>%
View(SEARCH1)
SEARCH1<-CompanySearch_limit("F&C INVESTMENT TRUST",mkey)#%>%
View(SEARCH1)
SEARCH1<-CompanySearch_limit("FLUTTER ENTERTAINMENT PLC",mkey)#%>%
SEARCH1<-CompanySearch_limit("FLUTTER ENTERTAINMENT PLC",mkey)%>%
filter(company.type=="plc")
SEARCH1<-CompanySearch_limit("FLUTTER ENTERTAINMENT",mkey)#%>%
View(SEARCH1)
SEARCH1<-CompanySearch_limit("NB GLOBAL FLOATING RATE",mkey)#%>%
View(SEARCH1)
SEARCH1<-CompanySearch_limit("NETWORK INTERNATIONAL HOLDINGS",mkey)#%>%
SEARCH1<-CompanySearch_limit("NEXTENERGY SOLAR FUND",mkey)#%>%
View(SEARCH1)
SEARCH1<-CompanySearch_limit("OXFORD INSTRUMENTS",mkey)#%>%
View(SEARCH1)
SEARCH1<-CompanySearch_limit("PHOENIX GROUP HOLDINGS",mkey)#%>%
View(SEARCH1)
SEARCH1<-CompanySearch_limit("PHOENIX GROUP HOLDINGS PLC",mkey)#%>%
View(SEARCH1)
SEARCH1<-CompanySearch_limit("PPHE HOTEL GROUP",mkey)#%>%
View(SEARCH1)
SEARCH1<-CompanySearch_limit("RESTAURANT GROUP PLC ",mkey)#%>%
View(SEARCH1)
SEARCH1<-CompanySearch_limit("RESTAURANT GROUP PLC",mkey)%>%
filter(company.type=="plc")
SEARCH1<-CompanySearch_limit("WOODFORD PATIENT CAPITAL TRUST",mkey)%>%
filter(company.type=="plc")
View(SEARCH1)
